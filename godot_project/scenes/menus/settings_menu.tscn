[gd_scene load_steps=2 format=3 uid="uid://d3xuub3p1gkc0"]

[sub_resource type="GDScript" id="GDScript_0522e"]
resource_name = "settings_menu"
script/source = "extends Control

@onready var music_slider: HSlider = get_node(\"CenterContainer/VBoxContainer/GridContainer/music_slider\")
@onready var fx_slider: HSlider = get_node(\"CenterContainer/VBoxContainer/GridContainer/fx_slider\")

@onready var panel: Panel = get_node(\"Panel\")

func _ready():
	GlobalUIManager.settings_menu = self
	visible = false

func music_slider_callback(_some_value):
	GlobalAudioManager.music_level = sqrt(music_slider.value) * 4.0 - 40.0
	GlobalAudioManager.music_level_update.emit()

func fx_slider_callback(_some_value):
	GlobalAudioManager.fx_level = sqrt(fx_slider.value) * 4.0 - 40.0
	GlobalAudioManager.fx_level_update.emit()

func back_pressed():
	GlobalUIManager.close_settings()

func show_panel():
	panel.visible = true

func hide_panel():
	panel.visible = false
"

[node name="SettingsMenu" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_0522e")

[node name="Panel" type="Panel" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="CenterContainer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="CenterContainer"]
layout_mode = 2

[node name="GridContainer" type="GridContainer" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
columns = 2

[node name="music_label" type="Label" parent="CenterContainer/VBoxContainer/GridContainer"]
layout_mode = 2
text = "Music Level"
horizontal_alignment = 2

[node name="music_slider" type="HSlider" parent="CenterContainer/VBoxContainer/GridContainer"]
custom_minimum_size = Vector2(500, 0)
layout_mode = 2
value = 100.0
tick_count = 100

[node name="fx_label" type="Label" parent="CenterContainer/VBoxContainer/GridContainer"]
layout_mode = 2
text = "Effects level"

[node name="fx_slider" type="HSlider" parent="CenterContainer/VBoxContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
value = 100.0
tick_count = 100

[node name="back_button" type="Button" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "back"

[connection signal="drag_ended" from="CenterContainer/VBoxContainer/GridContainer/music_slider" to="." method="music_slider_callback"]
[connection signal="value_changed" from="CenterContainer/VBoxContainer/GridContainer/music_slider" to="." method="music_slider_callback"]
[connection signal="drag_ended" from="CenterContainer/VBoxContainer/GridContainer/fx_slider" to="." method="fx_slider_callback"]
[connection signal="value_changed" from="CenterContainer/VBoxContainer/GridContainer/fx_slider" to="." method="fx_slider_callback"]
[connection signal="pressed" from="CenterContainer/VBoxContainer/back_button" to="." method="back_pressed"]
